import TopNav from '../Components/TopNav';
import Banner from '../Components/Banner';
import Sales from '../Components/Sales';
import { Link } from 'react-router';
import { useEffect, useRef, useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import img1 from '../assets/user-2.png';
import img2 from '../assets/user-3.png';
import Footer from '../Components/Footer';
import banner from '../assets/banner_home.png';

const banners = [
  {
    name: 'Sarah M.',
    text: 'I absolutely love this coffee! The flavor is rich and smooth—perfect way to start my mornings. Highly recommend to any coffee lover.',
  },
  {
    name: 'James T.',
    text: 'Great quality beans and fast shipping. This coffee has become my go-to for that afternoon boost. Definitely ordering again!',
  },
];

const userImages = [img1, img2];

export default function Home() {
  const itemRefs = useRef([]);
  const [itemsInView, setItemsInView] = useState(2);
  const [index, setIndex] = useState(0);
  const scrollContainerRef = useRef(null);

  useEffect(() => {
    itemRefs.current = itemRefs.current.slice(0, banners.length);
  }, [banners]);

  function handleSlider(i) {
    if (i == 0) {
      setIndex(1);
      return;
    }

    if (i == 1) {
      setIndex(0);

      if (itemsInView == 2) {
        itemRefs.current[3]?.scrollIntoView({
          behavior: 'smooth',
          block: 'start', // or 'center', 'end', etc.
        });
      }
    }
  }

  return (
    <>
      <TopNav name="Home" />

      <Banner title='“Your Mornings Deserve Better Coffee”' img={banner} btn={true} subtitle="Only the finest beans, handpicked for premium taste." />
      <Sales title="Now on sale" />
      <div className="home">
        <Link className="home__link" to="/products">
          <p>Explore more</p>
          <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M1 1L6 6L0.999999 11"
              stroke="#502812"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </Link>
        <section className="home__customers">
          <p className="home__customers-p">What our customers say</p>
          <div ref={scrollContainerRef} className="home__customers-items">
            {banners.map((banner, index) => (
              <div key={index} className="home__customers-items-item">
                <div className="home__customers-items-item-img">
                  <img src={userImages[index]} alt={banner.name} />
                </div>

                <div className="home__customers-items-item-text">
                  <p>{banner.name}</p>
                  <p>{banner.text}</p>
                </div>
              </div>
            ))}
          </div>
        </section>
        <section className="home__icons">
          <div className="home__icons-item">
            <svg
              width="110"
              height="85"
              aria-label="One day delivery"
              viewBox="0 0 110 85"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M56.3891 0.819779C59.6103 1.13851 62.6386 2.55845 64.9476 4.86193C67.5866 7.49411 69.0698 11.063 69.0698 14.7854V15.8487H83.2495L84.2487 15.9086C85.2439 16.0218 86.2149 16.3 87.1215 16.7359C88.3295 17.3167 89.3875 18.1632 90.2246 19.2081L90.2292 19.2031L108.027 41.4026C109.298 42.9834 109.996 44.9486 110 46.9748V65.6108C110 67.9794 109.056 70.2506 107.377 71.9257C105.698 73.6008 103.421 74.5424 101.047 74.5424H94.1068C92.4348 80.4317 87.0202 84.75 80.5814 84.75C74.1426 84.75 68.728 80.4317 67.056 74.5424H42.9437C41.2722 80.4317 35.8574 84.75 29.4186 84.75C22.9798 84.75 17.565 80.4317 15.8935 74.5424H8.95349C6.57887 74.5424 4.30223 73.6008 2.62309 71.9257C1.15376 70.4599 0.24839 68.5378 0.044967 66.4932L0 65.6108V14.7854C0 11.063 1.48341 7.49411 4.12198 4.86193C6.7606 2.22979 10.3382 0.75 14.0698 0.75H55L56.3891 0.819779ZM29.4186 64.3348C25.8865 64.3348 23.0233 67.1909 23.0233 70.7146C23.0233 74.2382 25.8865 77.0943 29.4186 77.0943C32.9507 77.0943 35.814 74.2382 35.814 70.7146C35.814 67.1909 32.9507 64.3348 29.4186 64.3348ZM80.5814 64.3348C77.0491 64.3348 74.1861 67.1909 74.1861 70.7146C74.1861 74.2382 77.0491 77.0943 80.5814 77.0943C84.1137 77.0943 86.9767 74.2382 86.9767 70.7146C86.9767 67.1909 84.1137 64.3348 80.5814 64.3348ZM14.0698 8.4057C12.3736 8.4057 10.7474 9.07833 9.54805 10.2748C8.34869 11.4712 7.67442 13.0934 7.67442 14.7854V65.6108L7.69939 65.8598C7.74845 66.1053 7.86904 66.3335 8.04914 66.5131C8.28904 66.752 8.61423 66.8867 8.95349 66.8867H15.8935C17.565 60.9974 22.9798 56.6791 29.4186 56.6791C35.8574 56.6791 41.2722 60.9974 42.9437 66.8867H61.3954V14.7854C61.3954 13.0934 60.721 11.4712 59.5218 10.2748C58.4729 9.22843 57.0977 8.58106 55.6344 8.43561L55 8.4057H14.0698ZM69.0698 62.6603C71.6151 59.0463 75.8176 56.6791 80.5814 56.6791C87.0202 56.6791 92.4348 60.9974 94.1068 66.8867H101.047C101.386 66.8867 101.711 66.752 101.951 66.5131C102.191 66.2738 102.326 65.9491 102.326 65.6108V46.9901L102.251 46.5665C102.203 46.4322 102.136 46.3046 102.046 46.1923L102.041 46.1872L84.2339 23.9879C84.1142 23.8389 83.9612 23.7119 83.7893 23.629C83.7028 23.5876 83.6123 23.5555 83.5192 23.5343L83.2347 23.5044H69.0698V62.6603Z"
                fill="#502812"
              />
            </svg>

            <p>One day delivery</p>
          </div>
          <div className="home__icons-item">
            <svg
              width="77"
              aria-label="Free delivery "
              height="84"
              viewBox="0 0 77 84"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M38.5 0.962036C40.3343 0.962036 42.1366 1.44643 43.725 2.36775L43.7212 2.37148L70.314 17.6367L70.325 17.6405L70.9075 18.0059C72.2353 18.8977 73.3449 20.0865 74.1474 21.481C75.064 23.0748 75.5481 24.8829 75.55 26.7236V57.2766C75.5481 59.1173 75.064 60.9252 74.1474 62.5189C73.2301 64.113 71.9119 65.4391 70.325 66.3596L70.314 66.3635L43.7212 81.6286L43.725 81.6324C42.2255 82.5018 40.5353 82.9756 38.8082 83.0268C38.7067 83.0378 38.6041 83.0455 38.5 83.0455C38.3946 83.0455 38.2907 83.0382 38.1883 83.0268C36.4623 82.9752 34.7733 82.5014 33.275 81.6324L6.68615 66.3635L6.67501 66.3596C5.08806 65.4391 3.76979 64.113 2.85275 62.5189C2.05023 61.1238 1.57847 59.5644 1.47228 57.9627L1.45001 57.2766V26.7236L1.47228 26.0338C1.57891 24.4333 2.05088 22.8751 2.85275 21.481C3.76982 19.887 5.08809 18.5611 6.67501 17.6405L6.68615 17.6367L33.275 2.37148C34.8634 1.45016 36.6659 0.962036 38.5 0.962036ZM7.15001 57.2689L7.19082 57.8917C7.27241 58.5102 7.47575 59.1082 7.7883 59.6515C8.20501 60.3762 8.80396 60.9783 9.52501 61.3968L35.65 76.3973V43.6556L7.15001 27.2158V57.2689ZM57.1215 34.5576C57.033 34.6139 56.9445 34.6682 56.8506 34.7142L41.35 43.6556V76.3973L67.475 61.3968L67.9907 61.0501C68.4835 60.6702 68.8989 60.1952 69.2116 59.6515C69.6277 58.9283 69.8485 58.1082 69.85 57.2728V27.2158L57.1215 34.5576ZM10.0557 22.2939L38.5 38.6965L49.8556 32.1451L21.3926 15.7836L10.0557 22.2939ZM38.5 6.6893C37.6666 6.6893 36.8469 6.90838 36.125 7.32693L36.1139 7.33438L27.1371 12.4837L55.5814 28.8415L66.9407 22.2939L40.886 7.33438L40.875 7.32693C40.153 6.90838 39.3334 6.6893 38.5 6.6893Z"
                fill="#502812"
              />
            </svg>

            <p>Free delivery </p>
          </div>
          <div className="home__icons-item">
            <svg
              width="75"
              height="84"
              aria-label="30 days returns "
              viewBox="0 0 75 84"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <g clip-path="url(#clip0_27_405)">
                <path
                  d="M34.2319 2.11686C35.3372 0.947798 37.1733 0.904803 38.3335 2.01843L45.6087 9.0034L49.8041 13.0352L45.8 17.268L38.8706 24.5975C37.7651 25.7674 35.9286 25.8113 34.769 24.6959C33.6121 23.5818 33.5676 21.7335 34.6714 20.5657L38.3294 16.6979C31.4078 16.301 24.6207 18.3049 18.9406 22.4729C12.435 27.248 8.16231 34.2905 6.9126 42.304C4.33356 58.8461 15.5842 74.4235 31.994 77.0279C39.9432 78.2938 47.9029 76.3505 54.41 71.5768C60.9154 66.8005 65.1883 59.7588 66.4383 51.7456C67.9733 41.9189 64.6254 32.0239 57.6246 25.1881C56.3266 23.9206 56.055 21.8599 57.165 20.4222C58.275 18.9847 60.3433 18.7168 61.6654 19.9587C70.5333 28.2895 74.81 40.5743 72.9037 52.7713C71.3816 62.5241 66.1825 71.0959 58.2633 76.9087C51.9254 81.5614 44.4483 84.0004 36.7547 84.0004C34.8375 84.0004 32.9073 83.8479 30.9767 83.5409C11.0024 80.3724 -2.6934 61.4128 0.44693 41.2786C1.96928 31.5239 7.1696 22.9528 15.0872 17.1409C21.9032 12.1383 30.0361 9.70283 38.3376 10.0985L34.3336 6.25123C33.1736 5.13709 33.1268 3.28639 34.2319 2.11686ZM39.4321 30.3069C39.8923 30.3069 40.2663 30.6838 40.2663 31.1477V33.6497C42.7783 34.0949 46.095 35.1986 47.9446 39.0104C48.0783 39.2867 47.9604 39.6189 47.6841 39.7487L43.6679 41.6231C43.4162 41.7405 43.1154 41.6493 42.9721 41.4098C42.1046 39.962 39.5516 38.826 37.1576 38.8258C35.5443 38.8258 31.7946 39.1169 31.7946 41.7995C31.7957 43.7274 34.2108 44.1713 37.3691 44.5514C42.3108 45.1651 49.0787 46.0042 49.0796 53.337C49.0796 58.7344 44.735 61.5787 40.2704 62.0818L40.2663 65.039C40.2662 65.5023 39.8958 65.879 39.4362 65.8799H35.2899C34.8296 65.8799 34.4557 65.5027 34.4557 65.039V62.2662C29.7661 61.708 26.3196 59.348 24.7226 55.5806C24.6041 55.3013 24.7341 54.9779 25.0116 54.8587L29.3979 52.9846C29.6755 52.8658 29.9965 52.996 30.1141 53.2757C30.9713 55.3278 33.934 56.8721 37.007 56.8726C38.3879 56.8726 42.895 56.6159 42.895 53.337C42.8937 51.6221 40.9666 50.5923 36.832 50.1009C32.1915 49.5767 25.8302 48.8598 25.8294 41.7995C25.8294 37.4688 29.0446 34.442 34.4557 33.6374V31.1477C34.4557 30.6838 34.8296 30.3069 35.2899 30.3069H39.4321Z"
                  fill="#502812"
                />
              </g>
              <defs>
                <clipPath id="clip0_27_405">
                  <rect width="75" height="84" fill="white" />
                </clipPath>
              </defs>
            </svg>

            <p>30 days returns </p>
          </div>
        </section>
      </div>
      <Footer/>
    </>
  );
}
